# Foreign Library Interface

------------------------------------------------------------------------

## 1 Why use C, C++, Fortran, or Other Languages with R?

-   **Speed**: Compiled code in C/C++/Fortran is significantly faster than R for computationally intensive tasks.

-   **Access to Existing Libraries**: Many libraries, algorithms, and tools are already implemented in these languages and can be leveraged in R.

-   **Efficiency**: Certain numerical methods, matrix operations, and simulations are much faster when implemented in compiled languages.

## 2 About Speed

-   Speed is important but not always the most compelling reason for using FFI.

-   Well-written R code still perform well.

-   Claim:

    -   It's often faster and easier to write a functional prototype in R than to design an optimized C program from scratch.

## 3 Suggestions for Development

-   Start with R for prototyping and algorithm development.

-   Use profiling tools to identify bottlenecks in R code.

-   Optimize within R first using better algorithms or vectorization.

-   If necessary, implement performance-critical sections in C, C++, or Fortran.

## 4 Don't get carried away

-   Writing a dependable program entirely in C (or C++, Fortran, etc.) is ideal for performance, but:

    -   It's a big "if" whether it works dependably.

    -   Writing in R is faster in development time (1/2 or 1/3 of the time compared to C).

    -   Collaborators may not know C, making R easier for teamwork and readability.

-   Example: Marty Plummer's JAGS program is in C++ for performance, not R.

## 5 If not for Speed, Then why the FFI?

-   FFI is valuable for leveraging existing programming libraries written in C, C++, or Fortran.

-   Such libraries often undergo rigorous testing and optimization, e.g.,:

    -   **ATLAS** (Automatically Tuned Linear Algebra Software).

    -   **GotoBLAS2**(an optimized BLAS implementation).

## 6 Return by Value vs. Return by Reference

-   Return by Value:

    -   Operates on copies of input variables.

    -   Returns a new result without modifying the inputs.

    -   Preferred in R since arguments are "local copies" in R functions.

-   Return by Reference

    -   Operates on pointers to input variables.

    -   Modifies input variables directly at their memory location.

    -   Useful for efficiency in C but requires careful handling in R.

## 7 C Allows Both

-   C supports both return by value and return by reference:

    -   Return by value: Simplest, returns a single integer, float, etc.

    -   Return by Reference: Allows returning multiple outputs by modifying input variables through pointers.

-   Caution: Using return by reference in C requires understanding of pointers and careful memory management.

------------------------------------------------------------------------

# Foreign Library Interface
